<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Adding extras to an R package | Creating the litr R package</title>
  <meta name="description" content="9 Adding extras to an R package | Creating the litr R package" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Adding extras to an R package | Creating the litr R package" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Adding extras to an R package | Creating the litr R package" />
  
  
  

<meta name="author" content="Jacob Bien" />


<meta name="date" content="2022-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functionality-to-facilitate-workflow.html"/>
<link rel="next" href="combining-.r-files.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a></li>
<li class="chapter" data-level="3" data-path="package-setup.html"><a href="package-setup.html"><i class="fa fa-check"></i><b>3</b> Package setup</a>
<ul>
<li class="chapter" data-level="3.1" data-path="package-setup.html"><a href="package-setup.html#a-note-on-circularity"><i class="fa fa-check"></i><b>3.1</b> A note on circularity</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="generating-package.html"><a href="generating-package.html"><i class="fa fa-check"></i><b>4</b> Generating the R package</a>
<ul>
<li class="chapter" data-level="4.1" data-path="generating-package.html"><a href="generating-package.html#sending-code-chunks-to-the-package"><i class="fa fa-check"></i><b>4.1</b> Sending code chunks to the package</a></li>
<li class="chapter" data-level="4.2" data-path="generating-package.html"><a href="generating-package.html#setting-up-the-r-package-creation"><i class="fa fa-check"></i><b>4.2</b> Setting up the R package creation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="hash.html"><a href="hash.html"><i class="fa fa-check"></i><b>5</b> Not overwriting a manually edited R package</a></li>
<li class="chapter" data-level="6" data-path="document.html"><a href="document.html"><i class="fa fa-check"></i><b>6</b> Wrapper to <code>devtools::document()</code></a></li>
<li class="chapter" data-level="7" data-path="rendering.html"><a href="rendering.html"><i class="fa fa-check"></i><b>7</b> Altering the rendering process</a>
<ul>
<li class="chapter" data-level="7.1" data-path="hash.html"><a href="hash.html#output-format"><i class="fa fa-check"></i><b>7.1</b> Defining <code>litr</code> output formats</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rendering.html"><a href="rendering.html#pdf-output-format"><i class="fa fa-check"></i><b>7.1.1</b> .pdf output format</a></li>
<li class="chapter" data-level="7.1.2" data-path="rendering.html"><a href="rendering.html#html-output-format"><i class="fa fa-check"></i><b>7.1.2</b> .html output format</a></li>
<li class="chapter" data-level="7.1.3" data-path="rendering.html"><a href="rendering.html#bookdown-output-format"><i class="fa fa-check"></i><b>7.1.3</b> bookdown output format</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rendering.html"><a href="rendering.html#render"><i class="fa fa-check"></i><b>7.2</b> Defining <code>litr::<a href='rendering.html#render'>render</a>()</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functionality-to-facilitate-workflow.html"><a href="functionality-to-facilitate-workflow.html"><i class="fa fa-check"></i><b>8</b> Functionality to facilitate workflow</a></li>
<li class="chapter" data-level="9" data-path="adding-extras-to-an-r-package.html"><a href="adding-extras-to-an-r-package.html"><i class="fa fa-check"></i><b>9</b> Adding extras to an R package</a>
<ul>
<li class="chapter" data-level="9.1" data-path="adding-extras-to-an-r-package.html"><a href="adding-extras-to-an-r-package.html#adding-a-readme"><i class="fa fa-check"></i><b>9.1</b> Adding a README</a></li>
<li class="chapter" data-level="9.2" data-path="adding-extras-to-an-r-package.html"><a href="adding-extras-to-an-r-package.html#adding-a-hex-sticker"><i class="fa fa-check"></i><b>9.2</b> Adding a hex sticker</a></li>
<li class="chapter" data-level="9.3" data-path="adding-extras-to-an-r-package.html"><a href="adding-extras-to-an-r-package.html#adding-vignettes"><i class="fa fa-check"></i><b>9.3</b> Adding vignettes</a></li>
<li class="chapter" data-level="9.4" data-path="adding-extras-to-an-r-package.html"><a href="adding-extras-to-an-r-package.html#add-a-pkgdown-site"><i class="fa fa-check"></i><b>9.4</b> Add a pkgdown site</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="combining-.r-files.html"><a href="combining-.r-files.html"><i class="fa fa-check"></i><b>10</b> Combining .R files</a></li>
<li class="chapter" data-level="11" data-path="including-templates.html"><a href="including-templates.html"><i class="fa fa-check"></i><b>11</b> Including templates</a></li>
<li class="chapter" data-level="12" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>12</b> Defining some tests</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tests.html"><a href="tests.html#test-check-unedited"><i class="fa fa-check"></i><b>12.1</b> Testing <code><a href='hash.html#check_unedited'>check_unedited</a>()</code></a></li>
<li class="chapter" data-level="12.2" data-path="tests.html"><a href="tests.html#testing-get_params_used"><i class="fa fa-check"></i><b>12.2</b> Testing <code><a href='rendering.html#get_params_used'>get_params_used</a>()</code></a></li>
<li class="chapter" data-level="12.3" data-path="tests.html"><a href="tests.html#testing-chunk-referencing"><i class="fa fa-check"></i><b>12.3</b> Testing chunk referencing</a></li>
<li class="chapter" data-level="12.4" data-path="tests.html"><a href="tests.html#testing-different-ways-of-rendering"><i class="fa fa-check"></i><b>12.4</b> Testing different ways of rendering</a></li>
<li class="chapter" data-level="12.5" data-path="tests.html"><a href="tests.html#testing-other-templates"><i class="fa fa-check"></i><b>12.5</b> Testing other templates</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="documenting-the-package-and-testing.html"><a href="documenting-the-package-and-testing.html"><i class="fa fa-check"></i><b>13</b> Documenting the package and testing</a>
<ul>
<li class="chapter" data-level="13.1" data-path="documenting-the-package-and-testing.html"><a href="documenting-the-package-and-testing.html#add-examples-folder-with-the-output-of-knitting-each-example"><i class="fa fa-check"></i><b>13.1</b> Add examples folder with the output of knitting each example</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="including-extras-for-litr.html"><a href="including-extras-for-litr.html"><i class="fa fa-check"></i><b>14</b> Including extras for <code>litr</code></a>
<ul>
<li class="chapter" data-level="14.1" data-path="including-extras-for-litr.html"><a href="including-extras-for-litr.html#readme-with-hex-sticker"><i class="fa fa-check"></i><b>14.1</b> README with hex sticker</a></li>
<li class="chapter" data-level="14.2" data-path="including-extras-for-litr.html"><a href="including-extras-for-litr.html#vignettes"><i class="fa fa-check"></i><b>14.2</b> Vignettes</a></li>
<li class="chapter" data-level="14.3" data-path="including-extras-for-litr.html"><a href="including-extras-for-litr.html#a-pkgdown-site"><i class="fa fa-check"></i><b>14.3</b> A pkgdown site</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating the <code>litr</code> R package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="adding-extras-to-an-r-package" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">9</span> Adding extras to an R package<a href="adding-extras-to-an-r-package.html#adding-extras-to-an-r-package" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>When writing an R package, there are some additional items one typically wants to include, such as a README file, one or more vignettes, and a <code>pkgdown</code> site. In this section, we define some helper functions that will be make it easy to add these “extras” to a package.</p>
<p>While a user could choose to generate all these items within the generating .Rmd file, for all but the simplest examples, it will probably be preferred to have these as separate source files. These source files can live in the same directory as the generating .Rmd file or in their own directory (e.g., <code>source-files</code> lives in the same directory as <code>create-litr.Rmd</code>, which is called <code>litr-project</code>).</p>
<div id="adding-a-readme" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Adding a README<a href="adding-extras-to-an-r-package.html#adding-a-readme" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We define a helper function that takes an externally defined README.Rmd and puts it into the package, creates a README.md, and makes sure that these will be added to the .Rbuildignore.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="adding-extras-to-an-r-package.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add README to package</span></span>
<span id="cb69-2"><a href="adding-extras-to-an-r-package.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb69-3"><a href="adding-extras-to-an-r-package.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; This function takes a README.Rmd file, copies it into the package, and then</span></span>
<span id="cb69-4"><a href="adding-extras-to-an-r-package.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; renders it to a README.md file.  It also adds these two files to the</span></span>
<span id="cb69-5"><a href="adding-extras-to-an-r-package.html#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; .Rbuildignore.</span></span>
<span id="cb69-6"><a href="adding-extras-to-an-r-package.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb69-7"><a href="adding-extras-to-an-r-package.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param rmd_file The path to a .Rmd file.</span></span>
<span id="cb69-8"><a href="adding-extras-to-an-r-package.html#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb69-9"><a href="adding-extras-to-an-r-package.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span id='add_readme'>add_readme</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(rmd_file) {</span>
<span id="cb69-10"><a href="adding-extras-to-an-r-package.html#cb69-10" aria-hidden="true" tabindex="-1"></a>  usethis<span class="sc">::</span><span class="fu">use_readme_rmd</span>(<span class="at">open =</span> <span class="cn">FALSE</span>)</span>
<span id="cb69-11"><a href="adding-extras-to-an-r-package.html#cb69-11" aria-hidden="true" tabindex="-1"></a>  fs<span class="sc">::</span><span class="fu">file_copy</span>(rmd_file, <span class="at">new_path =</span> <span class="st">&quot;README.Rmd&quot;</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb69-12"><a href="adding-extras-to-an-r-package.html#cb69-12" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> xfun<span class="sc">::</span><span class="fu">Rscript_call</span>(</span>
<span id="cb69-13"><a href="adding-extras-to-an-r-package.html#cb69-13" aria-hidden="true" tabindex="-1"></a>    rmarkdown<span class="sc">::</span>render,</span>
<span id="cb69-14"><a href="adding-extras-to-an-r-package.html#cb69-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">list</span>(</span>
<span id="cb69-15"><a href="adding-extras-to-an-r-package.html#cb69-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">input =</span> <span class="st">&quot;README.Rmd&quot;</span>,</span>
<span id="cb69-16"><a href="adding-extras-to-an-r-package.html#cb69-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">output_options =</span> <span class="fu">list</span>(<span class="at">html_preview =</span> <span class="st">&quot;false&quot;</span>)</span>
<span id="cb69-17"><a href="adding-extras-to-an-r-package.html#cb69-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-18"><a href="adding-extras-to-an-r-package.html#cb69-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-19"><a href="adding-extras-to-an-r-package.html#cb69-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="adding-a-hex-sticker" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Adding a hex sticker<a href="adding-extras-to-an-r-package.html#adding-a-hex-sticker" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We define a helper function that takes an externally defined hex sticker (.png file) and puts it into the package under <code>man/figures</code>. The suggestion for storing it in this directory came from <a href="https://pkgdown.r-lib.org/reference/build_home.html#images-and-figures">here</a>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="adding-extras-to-an-r-package.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add a hex sticker to package</span></span>
<span id="cb70-2"><a href="adding-extras-to-an-r-package.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb70-3"><a href="adding-extras-to-an-r-package.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; In addition to calling this function, you should add to your README.Rmd something like this:</span></span>
<span id="cb70-4"><a href="adding-extras-to-an-r-package.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb70-5"><a href="adding-extras-to-an-r-package.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; `# your-title &lt;img src=&quot;man/figures/logo.png&quot; align=&quot;right&quot; height=&quot;139&quot; /&gt;`</span></span>
<span id="cb70-6"><a href="adding-extras-to-an-r-package.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb70-7"><a href="adding-extras-to-an-r-package.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; See [here](https://pkgdown.r-lib.org/reference/build_home.html#package-logo) </span></span>
<span id="cb70-8"><a href="adding-extras-to-an-r-package.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; for more.</span></span>
<span id="cb70-9"><a href="adding-extras-to-an-r-package.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb70-10"><a href="adding-extras-to-an-r-package.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param hex_png_file The .png file with your package&#39;s hex sticker</span></span>
<span id="cb70-11"><a href="adding-extras-to-an-r-package.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb70-12"><a href="adding-extras-to-an-r-package.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span id='add_hex_sticker'>add_hex_sticker</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(hex_png_file) {</span>
<span id="cb70-13"><a href="adding-extras-to-an-r-package.html#cb70-13" aria-hidden="true" tabindex="-1"></a>  figures_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">&quot;man&quot;</span>, <span class="st">&quot;figures&quot;</span>)</span>
<span id="cb70-14"><a href="adding-extras-to-an-r-package.html#cb70-14" aria-hidden="true" tabindex="-1"></a>  fs<span class="sc">::</span><span class="fu">dir_create</span>(figures_dir)</span>
<span id="cb70-15"><a href="adding-extras-to-an-r-package.html#cb70-15" aria-hidden="true" tabindex="-1"></a>  fs<span class="sc">::</span><span class="fu">file_copy</span>(<span class="at">path =</span> hex_png_file, </span>
<span id="cb70-16"><a href="adding-extras-to-an-r-package.html#cb70-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">new_path =</span> <span class="fu">file.path</span>(figures_dir, <span class="st">&quot;logo.png&quot;</span>), </span>
<span id="cb70-17"><a href="adding-extras-to-an-r-package.html#cb70-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-18"><a href="adding-extras-to-an-r-package.html#cb70-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="adding-vignettes" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Adding vignettes<a href="adding-extras-to-an-r-package.html#adding-vignettes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We next define a helper function for adding vignettes to the package. This mimics <code>usethis::use_vignette()</code>. We couldn’t directly use that function because we want the project file to live outside of the package directory, which confuses <code>usethis</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="adding-extras-to-an-r-package.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add one or more vignettes to package</span></span>
<span id="cb71-2"><a href="adding-extras-to-an-r-package.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb71-3"><a href="adding-extras-to-an-r-package.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param rmd_files A character vector of .Rmd files, each corresponding to </span></span>
<span id="cb71-4"><a href="adding-extras-to-an-r-package.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; a vignette</span></span>
<span id="cb71-5"><a href="adding-extras-to-an-r-package.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param other_files A character vector of any other files needed in the </span></span>
<span id="cb71-6"><a href="adding-extras-to-an-r-package.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; vignettes directory (.bib file, images, etc.)</span></span>
<span id="cb71-7"><a href="adding-extras-to-an-r-package.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb71-8"><a href="adding-extras-to-an-r-package.html#cb71-8" aria-hidden="true" tabindex="-1"></a><span id='add_vignettes'>add_vignettes</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(rmd_files, <span class="at">other_files =</span> <span class="cn">NULL</span>) {</span>
<span id="cb71-9"><a href="adding-extras-to-an-r-package.html#cb71-9" aria-hidden="true" tabindex="-1"></a>  fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">&quot;vignettes&quot;</span>)</span>
<span id="cb71-10"><a href="adding-extras-to-an-r-package.html#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (fn <span class="cf">in</span> <span class="fu">c</span>(rmd_files, other_files)) fs<span class="sc">::</span><span class="fu">file_copy</span>(fn, <span class="st">&quot;vignettes&quot;</span>)</span>
<span id="cb71-11"><a href="adding-extras-to-an-r-package.html#cb71-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb71-12"><a href="adding-extras-to-an-r-package.html#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># update DESCRIPTION file:</span></span>
<span id="cb71-13"><a href="adding-extras-to-an-r-package.html#cb71-13" aria-hidden="true" tabindex="-1"></a>  deps <span class="ot">&lt;-</span> desc<span class="sc">::</span><span class="fu">desc_get_deps</span>()<span class="sc">$</span>package</span>
<span id="cb71-14"><a href="adding-extras-to-an-r-package.html#cb71-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&quot;knitr&quot;</span> <span class="sc">%in%</span> deps))</span>
<span id="cb71-15"><a href="adding-extras-to-an-r-package.html#cb71-15" aria-hidden="true" tabindex="-1"></a>    desc<span class="sc">::</span><span class="fu">desc_set_dep</span>(<span class="st">&quot;knitr&quot;</span>, <span class="at">type =</span> <span class="st">&quot;Suggests&quot;</span>)</span>
<span id="cb71-16"><a href="adding-extras-to-an-r-package.html#cb71-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&quot;rmarkdown&quot;</span> <span class="sc">%in%</span> deps))</span>
<span id="cb71-17"><a href="adding-extras-to-an-r-package.html#cb71-17" aria-hidden="true" tabindex="-1"></a>    desc<span class="sc">::</span><span class="fu">desc_set_dep</span>(<span class="st">&quot;rmarkdown&quot;</span>, <span class="at">type =</span> <span class="st">&quot;Suggests&quot;</span>)</span>
<span id="cb71-18"><a href="adding-extras-to-an-r-package.html#cb71-18" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> desc<span class="sc">::</span><span class="fu">desc_set</span>(<span class="st">&quot;VignetteBuilder&quot;</span>, <span class="st">&quot;knitr&quot;</span>)</span>
<span id="cb71-19"><a href="adding-extras-to-an-r-package.html#cb71-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="add-a-pkgdown-site" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Add a pkgdown site<a href="adding-extras-to-an-r-package.html#add-a-pkgdown-site" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We define a function based on <code>usethis::use_pkgdown()</code>, but with a few differences:</p>
<ol style="list-style-type: decimal">
<li>Avoid the parts to do with looking for projects</li>
<li>Allow one to use a custom <code>_pkgdown.yml</code> that is stored outside of package</li>
</ol>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="adding-extras-to-an-r-package.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add a pkgdown site</span></span>
<span id="cb72-2"><a href="adding-extras-to-an-r-package.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb72-3"><a href="adding-extras-to-an-r-package.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; This function creates a website for your package.  You can see it locally by</span></span>
<span id="cb72-4"><a href="adding-extras-to-an-r-package.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; opening `docs/index.html` in your package.  To get it online you can copy the</span></span>
<span id="cb72-5"><a href="adding-extras-to-an-r-package.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; `docs` directory to your website&#39;s server.</span></span>
<span id="cb72-6"><a href="adding-extras-to-an-r-package.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb72-7"><a href="adding-extras-to-an-r-package.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Be sure that in the generating .Rmd file this is called *after*</span></span>
<span id="cb72-8"><a href="adding-extras-to-an-r-package.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; `litr::<a href='document.html#document'>document</a>()` has been called.  To customize the site, you may pass a</span></span>
<span id="cb72-9"><a href="adding-extras-to-an-r-package.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; customized `_pkgdown.yml` file as described in [this `pkgdown` vignette](https://pkgdown.r-lib.org/articles/customise.html).</span></span>
<span id="cb72-10"><a href="adding-extras-to-an-r-package.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb72-11"><a href="adding-extras-to-an-r-package.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param config_path The _pkgdown.yml file that lives somewhere outside of your package.  If NULL, then a basic default will be used.</span></span>
<span id="cb72-12"><a href="adding-extras-to-an-r-package.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb72-13"><a href="adding-extras-to-an-r-package.html#cb72-13" aria-hidden="true" tabindex="-1"></a><span id='add_pkgdown'>add_pkgdown</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">config_path =</span> <span class="cn">NULL</span>) {</span>
<span id="cb72-14"><a href="adding-extras-to-an-r-package.html#cb72-14" aria-hidden="true" tabindex="-1"></a>  config_file <span class="ot">&lt;-</span> <span class="st">&quot;_pkgdown.yml&quot;</span></span>
<span id="cb72-15"><a href="adding-extras-to-an-r-package.html#cb72-15" aria-hidden="true" tabindex="-1"></a>  destdir <span class="ot">&lt;-</span> <span class="st">&quot;docs&quot;</span></span>
<span id="cb72-16"><a href="adding-extras-to-an-r-package.html#cb72-16" aria-hidden="true" tabindex="-1"></a>  usethis<span class="sc">::</span><span class="fu">use_build_ignore</span>(<span class="fu">c</span>(config_file, destdir, <span class="st">&quot;pkgdown&quot;</span>))</span>
<span id="cb72-17"><a href="adding-extras-to-an-r-package.html#cb72-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(config_path)) {</span>
<span id="cb72-18"><a href="adding-extras-to-an-r-package.html#cb72-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a new config file (note it lives outside of package)</span></span>
<span id="cb72-19"><a href="adding-extras-to-an-r-package.html#cb72-19" aria-hidden="true" tabindex="-1"></a>    config <span class="ot">&lt;-</span> usethis<span class="sc">:::</span><span class="fu">pkgdown_config</span>(destdir)</span>
<span id="cb72-20"><a href="adding-extras-to-an-r-package.html#cb72-20" aria-hidden="true" tabindex="-1"></a>    usethis<span class="sc">::</span><span class="fu">write_over</span>(config_file, yaml<span class="sc">::</span><span class="fu">as.yaml</span>(config))</span>
<span id="cb72-21"><a href="adding-extras-to-an-r-package.html#cb72-21" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb72-22"><a href="adding-extras-to-an-r-package.html#cb72-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># copy the one that already exists:</span></span>
<span id="cb72-23"><a href="adding-extras-to-an-r-package.html#cb72-23" aria-hidden="true" tabindex="-1"></a>    fs<span class="sc">::</span><span class="fu">file_copy</span>(config_path, config_file)  </span>
<span id="cb72-24"><a href="adding-extras-to-an-r-package.html#cb72-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb72-25"><a href="adding-extras-to-an-r-package.html#cb72-25" aria-hidden="true" tabindex="-1"></a>  pkgdown<span class="sc">::</span><span class="fu">build_site</span>()</span>
<span id="cb72-26"><a href="adding-extras-to-an-r-package.html#cb72-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>After this step, you can locally see the site by opening <code>docs/index.html</code> in the browser. You can then copy the <code>docs</code> directory to your website’s server and you’re done.</p>
<p>Since the above function uses <code>pkgdown</code> and <code>yaml</code>, we include these in our package:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="adding-extras-to-an-r-package.html#cb73-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">&quot;pkgdown&quot;</span>)</span>
<span id="cb73-2"><a href="adding-extras-to-an-r-package.html#cb73-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">&quot;yaml&quot;</span>)</span></code></pre></div>
<pre><code>## ✔ Adding &#39;pkgdown&#39; to Imports field in DESCRIPTION
## • Refer to functions with `pkgdown::fun()`</code></pre>
<pre><code>## ✔ Adding &#39;yaml&#39; to Imports field in DESCRIPTION
## • Refer to functions with `yaml::fun()`</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functionality-to-facilitate-workflow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="combining-.r-files.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
